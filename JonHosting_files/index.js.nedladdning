let alrLoadup;function loadedUp(){if(alrLoadup)return;let obj=document.getElementsByTagName("BODY")[0];if(obj)alrLoadup=true;if(!localStorage['cookies']){if(obj){alrLoadup=true;obj=obj.appendChild(document.createElement("div"));obj.style="position:fixed;right:1%;bottom:1%;transition:1.2s;transform:scale(0.5)";obj.innerHTML="We use cookies! <a href='/legal/privacy.html'>Privacy</a><br /><button style='width:100%;padding-top:1em;padding-bottom:1em;font-size:150%;transition:0.2s;background-color:orange;border-radius:25px' onclick='localStorage[\"cookies\"]=1;this.parentElement.style.transform=\"scale(0)\";let dis=this;setTimeout(function(){dis.parentElement.style.display=\"none\";delete dis.parentElement.parentNode.removeChild(dis.parentElement)},1000)'>OK</button>";setTimeout(function(){obj.style.transform="scale(1)"},500)}}else if(window.location)if(window.location.pathname)if(window.location.pathname!='/support'){if(obj){obj=obj.appendChild(document.createElement("div"));obj.className="supportButton";obj.id="supportButton";obj.onclick=function(){obj.onclick=null;obj.innerHTML='<font color="red" onclick="this.parentElement.parentNode.removeChild(this.parentElement)">X</font><h2 style="background-color:green">Livechat support</h2><div id="chatText"><span>Hey and welcome to livechat! What is your issue?<br><input type="radio" name="issue" value="purchase" onchange="helpWith(this)">Purchase<br><input type="radio" name="issue" value="technical" onchange="helpWith(this)">Technical<br><input type="radio" name="issue" value="other" onchange="helpWith(this)">Other</span><div id="responseChat"></div></div><input type="text" id="chatMsg" style="width:85%;font-size:110%" placeholder="Message" maxlength=128 /><span onclick="sendMsg()">&#10148;</span>';cinte=setInterval(function(){MyAJAX('/support/chat/get/','GET',function(data){data=data.response;if(data){data=JSON.parse(data);if(data){let obj=document.getElementById('responseChat');if(data.length!=leng){for(let i=(leng?data.length-(data.length-leng):1);i<data.length;i++){obj.appendChild(document.createElement('span')).innerHTML='<font title="'+data[i][2]+'" style="text-align:left;color:'+(data[i][0]=='user'?'lime;float:right':'pink')+'">'+data[i][0]+'</font>&#8226; <font>'+data[i][1]+'</font><br />';}if(data.length-leng)document.getElementById('chatText').scrollTop=document.getElementById('chatText').scrollHeight;leng=data.length;}}}})},5000);obj.style.transform='scale(1)';obj.style.opacity='90%'};obj.innerHTML='<img title="Click for a livechat with support!" onmouseleave="this.style.marginRight=\'-7em\'" src="/idk2.png" style="border-radius:5px" />';}}
if(localStorage["loggedIn"]){let obj=document.getElementById('loginRight');if(obj){obj.innerHTML="Dashboard";obj.href="/dashboard";}}}loadedUp();window.addEventListener("load",loadedUp);
function fixTheme(){if(localStorage['theme']){if(document.getElementsByTagName("BODY")[0]){let bo=document.getElementsByTagName("BODY")[0];if(bo){bo.style.background=localStorage['theme'];let dingus=document.getElementById('themey');if(dingus&&localStorage['checked'])if(localStorage['checked']=="true")dingus.checked=localStorage['checked'];if(localStorage['ttheme'])bo.style.color=localStorage['ttheme'];}}}else if(document.getElementsByTagName("BODY")[0]){if(document.getElementsByTagName("BODY")[0].style.background)document.getElementsByTagName("BODY")[0].style='';}}fixTheme();function setTheme(typ,color){if(!color){delete localStorage[typ];}else{localStorage[typ]=color;}}function checkT(dingus){localStorage['checked']=dingus.checked;if(localStorage['checked']!="false"){setTheme('theme','');setTheme('ttheme','');fixTheme();}else{setTheme('theme','#FAFAFA');setTheme('ttheme','black');fixTheme();}}function fC(){if(localStorage['checked']!="false"){let cObj=document.getElementById('themey');if(cObj){cObj.checked=localStorage['checked'];}}}
function MyAJAX(uri,type,respons,headers,blob){var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){respons(this);return this;}};};xhttp.open(type, uri, true);if(blob)xhttp.responseType="blob";if(type.toLowerCase()=='post'){xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhttp.send(headers);}else{xhttp.send();}}
function analyze_data(blob){var myReader=new FileReader();myReader.readAsArrayBuffer(blob);myReader.addEventListener("loadend",function(e){var buffer=e.srcElement.result;return buffer;});}
function acc_sett(){let obj=document.getElementById('accsett');if(obj)if(obj.innerHTML){obj.innerHTML='';}else{obj.innerHTML='<img src="/JonHosting_Logo.png" width="40%" id="mainlogo" /><br /><a href="/login/delete" class="oof"><button onClick="deletAcc()" style="color:white;background-color:red;font-size:110%">Delete Account</button></a><br />';}}
let cinte;let leng=0;function openChat(){let obj=document.getElementById('supportChat');if(!obj){obj=document.getElementsByTagName('BODY')[0];obj=obj.appendChild(document.createElement('div'));obj.id='supportChat';}MyAJAX('/support/chat','GET',console.log);obj.innerHTML="<h2 style='background-color:green'>Livechat support</h2><div id='chatText' style='color:white;background-color:#333;width:100%;overflow:auto;max-height:15em'><span>Hey and welcome to livechat! What's your issue?<br /><input type='radio' name='issue' value='purchase' onchange='helpWith(this)'>Purchase</input><br /><input type='radio' name='issue' value='technical' onchange='helpWith(this)'>Technical</input><br /><input type='radio' name='issue' value='other' onchange='helpWith(this)'>Other</input></span><div id='responseChat'></div></div><input type='text' id='chatMsg' style='width:90%' placeholder='Message' maxlength=128 /><span onclick='sendMsg()'>&#10148;</span>";}let anonymous=true;function helpWith(d){d.parentElement.innerHTML='You need help primarily with <strong>'+d.value+'</strong><br /><input type="checkbox" onchange="anonymous=this.checked" checked />Anonymous<br />';/*parentNode.removeChild(d.parentElement);*/MyAJAX('/support/chat','GET',console.log);MyAJAX('/support/chat/send/'+(anonymous?'':'?p=1'),'POST',console.log,'msg=I need help with '+d.value);if(cinte){clearInterval(cinte);cinte=null;}cinte=setInterval(function(){MyAJAX('/support/chat/get','GET',function(data){data=data.response;if(data){data=JSON.parse(data);if(data){let obj=document.getElementById('responseChat');if(data.length!=leng){for(let i=(leng?data.length-(data.length-leng):1);i<data.length;i++){obj.appendChild(document.createElement('span')).innerHTML='<font title="'+data[i][2]+'" style="text-align:left;color:'+(data[i][0]?'lime':'pink')+'">'+(data[i][0]?data[i][0]:(data[i][3]?data[i][3]:'Support'))+'</font>&#8226; <font style='+(data[i][0]?'float:right':'')+'>'+data[i][1]+'</font><br />';}if(data.length-leng)document.getElementById('chatText').scrollTop=document.getElementById('chatText').scrollHeight;leng=data.length;}}}})},2000)}function sendMsg(){let obj=document.getElementById('chatMsg');if(obj.value){MyAJAX('/support/chat/send/'+(anonymous?'':'?p=1'),'POST',console.log,'msg='+obj.value.replace(/=/g,'&#61;'));obj.value='';}}
